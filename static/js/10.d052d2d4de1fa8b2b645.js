webpackJsonp([10],{JqxZ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("mtWM");var s=i("xsyJ"),a={name:"autopay",data:function(){return{dev:[],show:!1,loadshow:!0,url:"",ip:"",res:"",apps:"oppo",centerDialogVisible:!1,loading:!1}},mounted:function(){this.GetDevice()},created:function(){this.initWebSocket()},destroyed:function(){this.websocketclose()},methods:{initWebSocket:function(){this.websock=new WebSocket("ws://localhost:8090/log"),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){this.websocketsend(this.user)},websocketonerror:function(){this.initWebSocket()},websocketonmessage:function(t){-1!=t.data.indexOf("\\u")?document.getElementById("ms").innerText=this.Hanzi(t.data):document.getElementById("ms").innerText=t.data},websocketsend:function(t){this.websock.send(t)},websocketclose:function(t){console.log("断开连接",t)},GetDevice:function(){var t=this;Object(s.b)().then(function(e){var i=e.code,s=(e.msg,e.data);void 0!=s&&0==s.length&&t.$message("无在线设备，请确认设备已连接"),200==i&&(t.dev=s)})},actRun:function(){var t=this;if(this.res="",void 0!=this.dev&&0!=this.dev.lenth){for(var e=0;e<this.dev.length;e++)1==this.dev[e].Online&&("huawei"!=this.apps||this.dev[e].name!=this.apps&&"HONOR"!=this.dev[e].name?this.dev[e].name==this.apps&&(this.url="http://"+this.dev[e].ip+":7912/remote",this.ip=this.dev[e].ip):(this.url="http://"+this.dev[e].ip+":7912/remote",this.ip=this.dev[e].ip));""!=this.ip?(this.show=!0,this.centerDialogVisible=!0,Object(s.a)(this.apps+"&"+this.ip).then(function(e){e.code,e.msg;var i=e.info;t.res=i})):this.$message.error(this.apps+"无在线设备")}else this.$message.error("无在线设备，请确认设备已连接，点击更新设备按钮重新获取设备列表")},Hanzi:function(t){t=t.split("\\u");for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(parseInt(t[i],16).toString(10));return e+"\n"},DeviceUp:function(){var t=this;this.loading=!0,Object(s.c)().then(function(e){var i=e.code,s=(e.msg,e.data);200==i?t.$message("设备信息已更新"):t.$message.error(s)}),this.GetDevice(),this.loading=!1}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("el-main",[i("div",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("p",{staticClass:"title"},[t._v("在线设备")]),t._v(" "),i("div",{staticClass:"card kjfs",staticStyle:{"margin-right":"2px","background-color":"rgba(233, 238, 243, 0.23)"}},[i("el-row",{staticStyle:{height:"480px"}},t._l(t.dev,function(e,s){return i("el-col",{attrs:{span:10}},[i("el-card",{staticStyle:{"margin-right":"5px"}},[i("img",{staticClass:"image",attrs:{src:e.img}})]),t._v(" "),i("div",{staticStyle:{padding:"2px"}},[i("div"),t._v(" "),i("div",{staticClass:"bottom clearfix"})])],1)}),1)],1)]),t._v(" "),i("el-col",{attrs:{span:8}},[i("p",{staticClass:"title"},[t._v("执行脚本")]),t._v(" "),i("div",{staticClass:"card dbsx",staticStyle:{height:"480px","margin-right":"2px","background-color":"rgba(233, 238, 243, 0.23)"}},[i("div",{staticStyle:{"text-align":"center"}},[i("div",[i("el-button",{staticStyle:{"margin-top":"100px"},on:{click:t.actRun}},[t._v("运行")]),t._v(" "),i("div",[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"10%"},attrs:{plain:"",type:"primary"},on:{click:t.DeviceUp}},[t._v("设备更新")])],1),t._v(" "),i("div",[i("el-radio",{staticStyle:{"margin-top":"10%"},attrs:{label:"oppo"},model:{value:t.apps,callback:function(e){t.apps=e},expression:"apps"}},[t._v("oppo")]),t._v(" "),i("el-radio",{staticStyle:{"margin-top":"10%"},attrs:{label:"huawei"},model:{value:t.apps,callback:function(e){t.apps=e},expression:"apps"}},[t._v("华为")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"实时显示",visible:t.centerDialogVisible,center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[i("div",[i("iframe",{directives:[{name:"show",rawName:"v-show",value:t.centerDialogVisible,expression:"centerDialogVisible"}],staticStyle:{width:"450px",height:"800px"},attrs:{id:"show-iframe",frameborder:"0",name:"showHere",scrolling:"auto",src:t.url}}),t._v(" "),i("div",[t._v("\n                "+t._s(t.res)+"\n                ")])]),t._v(" "),i("div",[i("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")])],1)])],1)])]),t._v(" "),i("el-col",{attrs:{span:8}},[i("p",{staticClass:"title"},[t._v("日志")]),t._v(" "),i("ul",[i("div",{staticClass:"card kjfs",staticStyle:{"margin-right":"2px","background-color":"rgba(233, 238, 243, 0.23)",height:"480px"}},[i("li",[i("div",{staticStyle:{"text-align":"center"}},[i("span",{attrs:{id:"ms"}})])])])])])],1)],1)])],1)},staticRenderFns:[]};var o=i("VU/8")(a,n,!1,function(t){i("iBbT")},null,null);e.default=o.exports},iBbT:function(t,e){}});
//# sourceMappingURL=10.d052d2d4de1fa8b2b645.js.map